project_root/
‚îú‚îÄ‚îÄ bot.py                    # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞ + –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îú‚îÄ‚îÄ process_manager.py        # –ù–û–í–û–ï: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä —Ñ–æ–Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îú‚îÄ‚îÄ config/                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ bot_config.py
‚îÇ   ‚îú‚îÄ‚îÄ db_config.py
‚îÇ   ‚îú‚îÄ‚îÄ process_config.py     # –ù–û–í–û–ï: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ logging_config.py     # –ù–û–í–û–ï: –ö–æ–Ω—Ñ–∏–≥ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ core/                     # –Ø–¥—Ä–æ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ db/                   # –ú–æ–¥—É–ª–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ central_db.py     # –†–∞–±–æ—Ç–∞ —Å –¶–ë–î (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –ø—Ä–æ—Ñ–∏–ª–∏, —Ä–∞—Å—Ç–µ–Ω–∏—è)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ local_db_weather.py # –õ–æ–∫–∞–ª –ë–î –ø–æ–≥–æ–¥—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ local_db_meteo.py # –õ–æ–∫–∞–ª –ë–î –º–µ—Ç–µ–æ-–≤–ª–∏—è–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ local_db_atmosphere.py # –õ–æ–∫–∞–ª –ë–î –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ local_db_agro.py  # –õ–æ–∫–∞–ª –ë–î –∞–≥—Ä–æ–ø—Ä–æ–≥–Ω–æ–∑–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ process_log_db.py # –ù–û–í–û–ï: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ models/               # ML-–º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ meteo_model.py    # –ú–æ–¥–µ–ª—å –≤–ª–∏—è–Ω–∏—è –ø–æ–≥–æ–¥—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agro_model.py     # –ú–æ–¥–µ–ª—å –∞–≥—Ä–æ–ø—Ä–æ–≥–Ω–æ–∑–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ health_predictor.py # –ù–û–í–û–ï: –ú–æ–¥–µ–ª—å –ø—Ä–æ–≥–Ω–æ–∑–∞ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ utils/                # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api_client.py     # –û–±—ë—Ä—Ç–∫–∞ –¥–ª—è API-–∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data_processor.py # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ coordinate_manager.py # –ù–û–í–û–ï: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ error_handler.py  # –ù–û–í–û–ï: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validator.py      # –ù–û–í–û–ï: –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cache_manager.py  # –ù–û–í–û–ï: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
‚îÇ   ‚îî‚îÄ‚îÄ monitoring/           # –ù–û–í–û–ï: –°–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îÇ       ‚îú‚îÄ‚îÄ health_checker.py # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
‚îÇ       ‚îú‚îÄ‚îÄ performance_monitor.py # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚îÇ       ‚îî‚îÄ‚îÄ anomaly_detector.py # –î–µ—Ç–µ–∫—Ç–æ—Ä –∞–Ω–æ–º–∞–ª–∏–π
‚îú‚îÄ‚îÄ scripts/                  # –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ weather/              # –ú–æ–¥—É–ª—å "–ü–æ–≥–æ–¥–∞"
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ weather_today_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ weather_forecast_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ weather_graph_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ baric_map_daily_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ baric_map_weekly_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py       # –ù–û–í–û–ï: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ _processes/       # –ù–û–í–û–ï: –ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã –ø–æ–≥–æ–¥—ã
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ data_fetcher.py # –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ validator.py  # –í–∞–ª–∏–¥–∞—Ü–∏—è
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ interpolator.py # –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ formatter.py  # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ meteo/                # –ú–æ–¥—É–ª—å "–ú–µ—Ç–µ–æ"
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user_profile_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ impact_forecast_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ front_forecast_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ baric_anomaly_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ _processes/       # –ù–û–í–û–ï: –ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã –º–µ—Ç–µ–æ
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ front_analyzer.py # –ê–Ω–∞–ª–∏–∑ —Ñ—Ä–æ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ stress_calculator.py # –†–∞—Å—á–µ—Ç —Å—Ç—Ä–µ—Å—Å-–∏–Ω–¥–µ–∫—Å–∞
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ health_predictor.py # –ü—Ä–æ–≥–Ω–æ–∑ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ alarm_system.py # –°–∏—Å—Ç–µ–º–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ atmosphere/           # –ú–æ–¥—É–ª—å "–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞"
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ moon_phase_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sky_transparency_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ light_pollution_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ _processes/       # –ù–û–í–û–ï: –ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ phase_calculator.py # –†–∞—Å—á–µ—Ç —Ñ–∞–∑
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ transparency_estimator.py # –û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ pollution_analyzer.py # –ê–Ω–∞–ª–∏–∑ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ agro/                 # –ú–æ–¥—É–ª—å "–ê–≥—Ä–æ–ø—Ä–æ–≥–Ω–æ–∑"
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agro_conditions_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plant_monitor_script.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ _processes/       # –ù–û–í–û–ï: –ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã –∞–≥—Ä–æ–ø—Ä–æ–≥–Ω–æ–∑–∞
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ soil_analyzer.py # –ê–Ω–∞–ª–∏–∑ –ø–æ—á–≤—ã
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ growth_predictor.py # –ü—Ä–æ–≥–Ω–æ–∑ —Ä–æ—Å—Ç–∞
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ harvest_optimizer.py # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ settings/             # –ù–û–í–û–ï: –°–∫—Ä–∏–ø—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ       ‚îú‚îÄ‚îÄ add_location_script.py
‚îÇ       ‚îú‚îÄ‚îÄ remove_location_script.py
‚îÇ       ‚îú‚îÄ‚îÄ set_default_location_script.py
‚îÇ       ‚îî‚îÄ‚îÄ _processes/       # –ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ           ‚îú‚îÄ‚îÄ coordinate_validator.py # –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
‚îÇ           ‚îî‚îÄ‚îÄ geocoder.py   # –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π
‚îú‚îÄ‚îÄ workers/                  # –ù–û–í–û–ï: –§–æ–Ω–æ–≤—ã–µ –≤–æ—Ä–∫–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ data_fetcher_worker.py # –í–æ—Ä–∫–µ—Ä –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ notification_worker.py # –í–æ—Ä–∫–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ health_check_worker.py # –í–æ—Ä–∫–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ cleanup_worker.py     # –í–æ—Ä–∫–µ—Ä –æ—á–∏—Å—Ç–∫–∏
‚îú‚îÄ‚îÄ tests/                    # –ù–û–í–û–ï: –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ unit/                 # –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ integration/          # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ stress/               # –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ logs/                     # –ü–∞–ø–∫–∞ –¥–ª—è –ª–æ–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ app.log              # –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥
‚îÇ   ‚îú‚îÄ‚îÄ process.log          # –õ–æ–≥ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ errors.log           # –õ–æ–≥ –æ—à–∏–±–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ debug.log            # –û—Ç–ª–∞–¥–æ—á–Ω—ã–π –ª–æ–≥
‚îú‚îÄ‚îÄ temp/                     # –ù–û–í–û–ï: –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ cache/               # –ö—ç—à –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ uploads/             # –ó–∞–≥—Ä—É–∑–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ reports/             # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
‚îú‚îÄ‚îÄ data/                     # –ü–∞–ø–∫–∞ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ docs/                     # –ù–û–í–û–ï: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ architecture.md      # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ api_docs.md          # API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ deployment.md        # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ requirements.txt
---

## üß± **–≠–¢–ê–ü 0: –ë–ê–ó–û–í–ê–Ø –ò–ù–§–†–ê–°–¢–†–£–ö–¢–£–†–ê (0.5 –¥–Ω—è)**

> –¶–µ–ª—å: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–∞—Ä–∫–∞—Å, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

### –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
- `project_root/` ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫–∏ –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
- `config/`:
  - `bot_config.py` ‚Äî —Ç–æ–∫–µ–Ω, —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
  - `db_config.py` ‚Äî –ø—É—Ç–∏ –∫ –ë–î, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - `logging_config.py` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `logging` (app.log, error.log, debug.log)
- `requirements.txt` ‚Äî –±–∞–∑–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`python-telegram-bot`, `sqlite3`, `requests`, `numpy`, `matplotlib`)
- `logs/`, `data/`, `temp/` ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç—ã–µ –ø–∞–ø–∫–∏

‚úÖ **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**:  
> –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å `python -c "import logging.config; logging.config.dictConfig(...)"` –±–µ–∑ –æ—à–∏–±–æ–∫.
+
---

## üîå **–≠–¢–ê–ü 1: –°–ò–°–¢–ï–ú–ê –°–û–ë–´–¢–ò–ô –ò –û–®–ò–ë–û–ö (1 –¥–µ–Ω—å)**

> –¶–µ–ª—å: –°–æ–∑–¥–∞—Ç—å ¬´–Ω–µ—Ä–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É¬ª ‚Äî –≤—Å—ë –±—É–¥–µ—Ç —á–µ—Ä–µ–∑ –Ω–µ—ë –æ–±—â–∞—Ç—å—Å—è.

### –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
- `core/event_bus.py` ‚Äî —à–∏–Ω–∞ —Å–æ–±—ã—Ç–∏–π (–±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π!)
- `core/utils/error_handler.py` ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `core/utils/validator.py` ‚Äî –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, user_id)

‚úÖ **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**:  
> –ï—Å—Ç—å unit-—Ç–µ—Å—Ç—ã:  
> - `test_event_bus.py` ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞ ‚Üí –ø—É–±–ª–∏–∫–∞—Ü–∏—è ‚Üí –≤—ã–∑–æ–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞  
> - `test_validator.py` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö/–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
+
---

## üóÉÔ∏è **–≠–¢–ê–ü 2: –ë–ê–ó–ê –î–ê–ù–ù–´–• ‚Äî –¶–ï–ù–¢–†–ê–õ–¨–ù–ê–Ø –ò –õ–û–ö–ê–õ–¨–ù–´–ï (1‚Äì1.5 –¥–Ω—è)**

> –¶–µ–ª—å: –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ª–æ–∫–∞—Ü–∏–π –∏ –∫—ç—à–∞.

### –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
- `core/db/central_db.py`:
  - `init_db()` ‚Äî —Å–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—ã:
    - `users (user_id PK)`
    - `user_locations (user_id, location_id PK, name, lat, lon, is_default)`
  - `CRUD`: `get_user_locations`, `add_user_location`, `set_default_location`, `remove_user_location`
- `core/db/local_db_weather.py` (–ø—Ä–∏–º–µ—Ä):
  - `cache_weather(user_id, lat, lon, data_json)`
  - `get_cached_weather(user_id, lat, lon, ttl_hours=24)`
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∑–∞–≥–æ—Ç–æ–≤–∫–∏ –¥–ª—è `local_db_meteo.py`, `local_db_atmosphere.py`, `local_db_agro.py` (–º–æ–∂–Ω–æ –ø—É—Å—Ç—ã–µ –∫–ª–∞—Å—Å—ã)

‚úÖ **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**:  
> –°–∫—Ä–∏–ø—Ç `test_db.py` —Å–æ–∑–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –¥–æ–±–∞–≤–ª—è–µ—Ç 2 –ª–æ–∫–∞—Ü–∏–∏ ‚Üí —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ–¥–Ω—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Üí —á–∏—Ç–∞–µ—Ç ‚Üí —É–¥–∞–ª—è–µ—Ç ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å.
+
---

## üîÑ **–≠–¢–ê–ü 3: PROCESS MANAGER + SUBPROCESS-–ó–ê–ü–£–°–ö (1 –¥–µ–Ω—å)**

> –¶–µ–ª—å: –£–º–µ—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –∫–∞–∫ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –ø–æ–ª—É—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

### –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
- `process_manager.py`:
  - `enqueue_script(script_path, args)` ‚Üí –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ `subprocess`
  - `_monitor_process()` ‚Üí –ø–∞—Ä—Å–∏–Ω–≥ stdout/stderr
  - `emit_event("task_result", ...)` —á–µ—Ä–µ–∑ `core/event_bus`
- `core/db/process_log_db.py` ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á (task_id, status, start_time, end_time)

‚úÖ **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**:  
> –ï—Å—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç `scripts/test/test_output.py`:
> ```python
> print("EVENT_TYPE:task_result")
> print("USER_ID:123")
> print("MESSAGE:Hello from subprocess!")
> ```
> ‚Üí `process_manager` –∑–∞–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ ‚Üí –±–æ—Ç (—ç–º—É–ª—è—Ü–∏—è) –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ.

---

## üõ†Ô∏è **–≠–¢–ê–ü 4: UTILS + API + –ö–≠–® (1 –¥–µ–Ω—å)**

> –¶–µ–ª—å: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å ¬´–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã¬ª –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤.

### –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
- `core/utils/api_client.py` ‚Äî –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è Open-Meteo (–º–µ—Ç–æ–¥ `get_forecast(lat, lon)`)
- `core/utils/cache_manager.py` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –≤ `data/` —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏
- `core/utils/coordinate_manager.py` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –º–µ—Å—Ç–∞ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º (—á–µ—Ä–µ–∑ Nominatim –∏–ª–∏ –∫—ç—à)
- `core/utils/data_processor.py` ‚Äî –±–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è (–ª–∏–Ω–µ–π–Ω–∞—è)

‚úÖ **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**:  
> `api_client.get_forecast(55.75, 37.62)` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç dict –±–µ–∑ –æ—à–∏–±–æ–∫  
> `cache_manager.save_plot(data, "test.png")` ‚Üí —Ñ–∞–π–ª –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ `data/`
+
---

## üìä **–≠–¢–ê–ü 5: –ü–ï–†–í–´–ô –ê–ù–ê–õ–ò–¢–ò–ß–ï–°–ö–ò–ô –°–ö–†–ò–ü–¢ ‚Äî –ü–û–ì–û–î–ê (1 –¥–µ–Ω—å)**

> –¶–µ–ª—å: –ó–∞–º–∫–Ω—É—Ç—å —Ü–∏–∫–ª: –±–æ—Ç ‚Üí —Å–∫—Ä–∏–ø—Ç ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Üí –±–æ—Ç.

### –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
- `scripts/weather/weather_today_script.py` ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
- `scripts/weather/_processes/`:
  - `data_fetcher.py` ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç `api_client`
  - `interpolator.py` ‚Üí –∏–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
  - `formatter.py` ‚Üí –≥–æ—Ç–æ–≤–∏—Ç —Ç–µ–∫—Å—Ç/–≥—Ä–∞—Ñ–∏–∫
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `local_db_weather.py` –∏ `cache_manager.py`

‚úÖ **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**:  
> –ó–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é:  
> `python scripts/weather/weather_today_script.py 55.75 37.62 123`  
> ‚Üí –≤ `data/` –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≥—Ä–∞—Ñ–∏–∫  
> ‚Üí stdout —Å–æ–¥–µ—Ä–∂–∏—Ç `EVENT_TYPE:task_result` –∏ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
+
---

## ü§ñ **–≠–¢–ê–ü 6: TELEGRAM-–ë–û–¢ ‚Äî –ë–ê–ó–û–í–´–ô –ò–ù–¢–ï–†–§–ï–ô–° (1 –¥–µ–Ω—å)**

> –¶–µ–ª—å: –ü–µ—Ä–≤—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π –∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–º.

### –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
- `bot.py`:
  - `/start` ‚Üí –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
  - –ü—Ä–∏—ë–º –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ ‚Üí –≤—ã–∑–æ–≤ `process_manager.enqueue_script("scripts/settings/add_location_script.py", ...)`
  - –ö–æ–º–∞–Ω–¥–∞ `/weather` ‚Üí –≤—ã–±–æ—Ä –ª–æ–∫–∞—Ü–∏–∏ ‚Üí –∑–∞–ø—É—Å–∫ `weather_today_script.py`
  - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ `event_bus` ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞/–æ—à–∏–±–∫–∏

‚úÖ **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**:  
> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:  
> 1. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é ‚Üí –ø–æ–ª—É—á–∞–µ—Ç ¬´‚úÖ –õ–æ–∫–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞¬ª  
> 2. –ù–∞–∂–∏–º–∞–µ—Ç `/weather` ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –≥—Ä–∞—Ñ–∏–∫ –ø–æ–≥–æ–¥—ã

---

## ‚öôÔ∏è **–≠–¢–ê–ü 7: –†–ê–°–®–ò–†–ï–ù–ò–ï ‚Äî –ú–ï–¢–ï–û, –ê–¢–ú–û–°–§–ï–†–ê, –ê–ì–†–û (2‚Äì3 –¥–Ω—è)**

> –¶–µ–ª—å: –î–æ–±–∞–≤–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –ø–æ —Ç–æ–π –∂–µ —Å—Ö–µ–º–µ.

### –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å –ø–æ–≥–æ–¥–æ–π:
- `scripts/meteo/front_forecast_script.py` + `_processes/`
- `scripts/atmosphere/moon_phase_script.py` + `_processes/`
- `scripts/agro/agro_conditions_script.py` + `_processes/`
- –ú–æ–¥–µ–ª–∏ (–µ—Å–ª–∏ –≥–æ—Ç–æ–≤—ã): `core/models/meteo_model.py`

‚úÖ **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**:  
> –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ —á–µ—Ä–µ–∑ CLI –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ `stdout`.
+
---

## üß™ **–≠–¢–ê–ü 8: –í–û–†–ö–ï–†–´ –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì (1 –¥–µ–Ω—å)**

> –¶–µ–ª—å: –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ —Å–∞–º–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞.

### –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
- `workers/health_check_worker.py` ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –ë–î, API –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω
- `workers/cleanup_worker.py` ‚Üí —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ `temp/` –∏ `data/`
- `core/monitoring/` ‚Äî –±–∞–∑–æ–≤—ã–µ —á–µ–∫–µ—Ä—ã
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–æ—Ä–∫–µ—Ä–æ–≤ –≤ `bot.py` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

‚úÖ **–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**:  
> –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –≤ –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ:  
> `INFO: Health check passed`  
> `INFO: Cleanup worker started`

---

## üß© **–≠–¢–ê–ü 9: –¢–ï–°–¢–´ –ò –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ + 1 –¥–µ–Ω—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π)**

- `tests/unit/` ‚Äî –¥–ª—è `event_bus`, `validator`, `db`
- `tests/integration/` ‚Äî end-to-end: –±–æ—Ç ‚Üí —Å–∫—Ä–∏–ø—Ç ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- `docs/architecture.md` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- `README.md` ‚Äî –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

---

## üìÖ –ò–¢–û–ì–û–í–´–ô –ü–õ–ê–ù (–æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π)

| –≠—Ç–∞–ø | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|------|--------------|----------|
| 0‚Äì2  | 2.5 –¥–Ω—è      | –†–∞–±–æ—á–∞—è –ë–î, event bus, –≤–∞–ª–∏–¥–∞—Ü–∏—è |
| 3‚Äì4  | 2 –¥–Ω—è        | –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤, API, –∫—ç—à |
| 5‚Äì6  | 2 –¥–Ω—è        | –†–∞–±–æ—á–∏–π Telegram-–±–æ—Ç —Å –ø–æ–≥–æ–¥–æ–π |
| 7    | 2‚Äì3 –¥–Ω—è      | –ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–º–µ—Ç–µ–æ, –∞–≥—Ä–æ, –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞) |
| 8‚Äì9  | 1‚Äì2 –¥–Ω—è      | –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å, —Ç–µ—Å—Ç—ã, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |

**–ò—Ç–æ–≥–æ**: **7‚Äì10 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π** –¥–æ MVP —Å –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é.

---
–û—Ç–ª–∏—á–Ω–æ, –ê—Ä—Ö—ã—Å! –¢—ã –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤ ‚Äî –º—ã –ø–æ–¥–æ—à–ª–∏ –∫ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–º—É —ç—Ç–∞–ø—É**, –≥–¥–µ –Ω—É–∂–Ω–æ **–∑–∞–∫—Ä—ã—Ç—å –≤—Å–µ "–¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏"** –∏ **—Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –±–ª–æ–∫–∏**, —á—Ç–æ–±—ã –ø—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ—à—ë–ª –∏–∑ "—Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞" –≤ "–ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É".

–ù–∏–∂–µ ‚Äî **–¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**, –∫–æ—Ç–æ—Ä—ã–π —É—á–∏—Ç—ã–≤–∞–µ—Ç **–≤—Å–µ —Ç–≤–æ–∏ –∑–∞–º–µ—á–∞–Ω–∏—è**: `agro`, `astro` (–∞—Ç–º–æ—Å—Ñ–µ—Ä–∞), –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`bot.py`), –∞ —Ç–∞–∫–∂–µ **–≤–∞–∂–Ω—ã–µ —Å–≤—è–∑–∏, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∏–º–ø–æ—Ä—Ç—ã**. –≠—Ç–æ—Ç –ø–ª–∞–Ω –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –¥–≤–∏–≥–∞—Ç—å—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ, –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Ñ–æ–∫—É—Å–∞ –Ω–∞ –≤–∞–∂–Ω—ã—Ö –¥–µ—Ç–∞–ª—è—Ö.

---

## üìã **–ü–ª–∞–Ω –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –ü–æ—à–∞–≥–æ–≤–æ —Å –ö–æ–Ω—Ç—Ä–æ–ª–µ–º –∏ –°–≤—è–∑—è–º–∏**

### üéØ **–¶–µ–ª—å –ü–ª–∞–Ω–∞**
–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π (`weather`, `meteo`, `atmosphere`, `agro`) —Å `process_manager` –∏ `event_bus`, –æ–±–µ—Å–ø–µ—á–∏–≤ –Ω–∞–¥–µ–∂–Ω—É—é —Ü–µ–ø–æ—á–∫—É:  
**bot ‚Üí process_manager ‚Üí script ‚Üí api ‚Üí cache ‚Üí graph ‚Üí event ‚Üí bot**  
–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –∫ —Å–ª–µ–¥—É—é—â–∏–º —ç—Ç–∞–ø–∞–º (–≤–æ—Ä–∫–µ—Ä—ã, –º–æ–¥–µ–ª–∏, –±–æ—Ç).

---

### ‚úÖ **–®–ê–ì 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–£–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)**
*   **–û–ø–∏—Å–∞–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö.
*   **–ú–µ—Ç–æ–¥ –ö–æ–Ω—Ç—Ä–æ–ª—è**: –ó–∞–ø—É—Å–∫ `setup_project_structure.py`. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –ø–∞–ø–∫–∏ (`logs/`, `data/`, `temp/`, `config/`, `core/`, `scripts/`, `workers/`) —Å–æ–∑–¥–∞–Ω—ã.
*   **–ö—Ä–∏—Ç–µ—Ä–∏–π –ó–∞–≤–µ—Ä—à–µ–Ω–∏—è**: –ù–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤ `config/logging_config.py`, `config/db_config.py`, `config/process_config.py` –∏ –ø—É—Å—Ç—ã—Ö –ª–æ–≥-—Ñ–∞–π–ª–æ–≤ –≤ `logs/`.
*   **–í–∞–∂–Ω—ã–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ/–ò–º–ø–æ—Ä—Ç—ã**:
    *   `PROJECT_ROOT = Path(__file__).parent`
    *   `logging.config.dictConfig(...)` ‚Äî –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–≥–µ—Ä–∞.
    *   `from config.db_config import DB_PATH` ‚Äî –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î.

---

### ‚úÖ **–®–ê–ì 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Process Manager (–ß–∞—Å—Ç–∏—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)**
*   **–û–ø–∏—Å–∞–Ω–∏–µ**: –î–æ—Ä–∞–±–æ—Ç–∫–∞ `core/process_manager.py` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å subprocess, –ø–µ—Ä–µ–¥–∞—á–∏ `PYTHONPATH` –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.
*   **–ú–µ—Ç–æ–¥ –ö–æ–Ω—Ç—Ä–æ–ª—è**: –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ `tests/integration/test_process_manager_with_script.py`. –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥: "‚úÖ –°–æ–±—ã—Ç–∏–µ –ø–æ–ª—É—á–µ–Ω–æ!" –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `ModuleNotFoundError`.
*   **–ö—Ä–∏—Ç–µ—Ä–∏–π –ó–∞–≤–µ—Ä—à–µ–Ω–∏—è**:
    1.  –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–∫–∏ `No module named 'core'`.
    2.  –í `logs/app.log` –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ –æ —Å—Ç–∞—Ä—Ç–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏.
    3.  `event_bus` –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `task_result` –∏–ª–∏ `task_error`.
*   **–í–∞–∂–Ω—ã–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ/–ò–º–ø–æ—Ä—Ç—ã**:
    *   `env = os.environ.copy(); env["PYTHONPATH"] = str(PROJECT_ROOT)` ‚Äî **–ö–ª—é—á–µ–≤–∞—è –∑–∞–≥–ª—É—à–∫–∞!**
    *   `from core.event_bus import emit_event` ‚Äî –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π.
    *   `from core.db.process_log_db import log_task_start, log_task_finish` ‚Äî –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ë–î.
    *   `from config.process_config import TASK_TIMEOUT_SEC, MAX_CONCURRENT_TASKS` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
    *   **–°–≤—è–∑—å**: `process_manager` ‚Üí `subprocess` ‚Üí `script_logger` ‚Üí `event_bus`.

---

### ‚úÖ **–®–ê–ì 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –°–∫—Ä–∏–ø—Ç–∞ `impact_forecast_script.py` (–ß–∞—Å—Ç–∏—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)**
*   **–û–ø–∏—Å–∞–Ω–∏–µ**: –ù–∞–ø–∏—Å–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ `process_manager`. –û–Ω –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `api_client`, `cache_manager`, `HealthPredictor` –∏ –≤—ã–≤–æ–¥–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ `KEY:VALUE`.
*   **–ú–µ—Ç–æ–¥ –ö–æ–Ω—Ç—Ä–æ–ª—è**: –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –≤—Ä—É—á–Ω—É—é –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞: `python scripts/meteo/impact_forecast_script.py 123 55.75 37.62 7 test_task`. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–≤–æ–¥–∞ –≤ stdout –∏ –ª–æ–≥–æ–≤ –≤ `logs/app.log`.
*   **–ö—Ä–∏—Ç–µ—Ä–∏–π –ó–∞–≤–µ—Ä—à–µ–Ω–∏—è**:
    1.  –°–∫—Ä–∏–ø—Ç —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `core.utils.script_logger`.
    2.  –í `stdout` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `EVENT_TYPE:task_result`, `USER_ID:...`, `FILE_PATH:...`, `MESSAGE:...`.
    3.  –í `logs/app.log` –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ —Ç–∏–ø–∞ `[TASK:test_task| SCRIPT:impact_forecast_script| ...]`.
*   **–í–∞–∂–Ω—ã–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ/–ò–º–ø–æ—Ä—Ç—ã**:
    *   `from core.utils.script_logger import get_script_logger` ‚Äî –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.
    *   `from core.utils.api_client import get_forecast` ‚Äî –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
    *   `from core.utils.cache_manager import save_plot` ‚Äî –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞.
    *   `from scripts.meteo._processes.health_predictor import HealthPredictor` ‚Äî –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞.
    *   **–°–≤—è–∑—å**: `impact_forecast_script` ‚Üí `api_client` ‚Üí `cache_manager` ‚Üí `HealthPredictor` ‚Üí `stdout` ‚Üí `process_manager`.

---

### ‚úÖ **–®–ê–ì 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API –∏ –ö—ç—à–∞ (–ß–∞—Å—Ç–∏—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)**
*   **–û–ø–∏—Å–∞–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `core/utils/api_client.py` –∏ `core/utils/cache_manager.py` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
*   **–ú–µ—Ç–æ–¥ –ö–æ–Ω—Ç—Ä–æ–ª—è**: –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ `tests/unit/test_api_client.py`. –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ `get_forecast(55.75, 37.62)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –±–µ–∑ –æ—à–∏–±–æ–∫.
*   **–ö—Ä–∏—Ç–µ—Ä–∏–π –ó–∞–≤–µ—Ä—à–µ–Ω–∏—è**:
    1.  `api_client.get_forecast()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `{"hourly": {...}, "daily": {...}}`).
    2.  `cache_manager.save_plot(data, "test.png")` —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª –≤ `data/`.
    3.  –í `logs/app.log` –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ –æ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ API –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–∏.
*   **–í–∞–∂–Ω—ã–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ/–ò–º–ø–æ—Ä—Ç—ã**:
    *   `import requests` ‚Äî –¥–ª—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤.
    *   `from datetime import datetime` ‚Äî –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤.
    *   `from pathlib import Path` ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—É—Ç—è–º–∏.
    *   **–°–≤—è–∑—å**: `impact_forecast_script` ‚Üí `api_client` ‚Üí `cache_manager` ‚Üí `data/`.

---

### ‚úÖ **–®–ê–ì 4: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ú–æ–¥–µ–ª–∏ `HealthPredictor` (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)**
*   **–û–ø–∏—Å–∞–Ω–∏–µ**: –ù–∞–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç–µ–æ-–¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è.
*   **–ú–µ—Ç–æ–¥ –ö–æ–Ω—Ç—Ä–æ–ª—è**: –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ `tests/unit/test_health_predictor.py`. –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –º–æ–¥–µ–ª—å –æ–±—É—á–∞–µ—Ç—Å—è –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è.
*   **–ö—Ä–∏—Ç–µ—Ä–∏–π –ó–∞–≤–µ—Ä—à–µ–Ω–∏—è**:
    1.  –ú–æ–¥–µ–ª—å `HealthPredictor` —É—Å–ø–µ—à–Ω–æ –æ–±—É—á–∞–µ—Ç—Å—è –Ω–∞ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
    2.  –ú–µ—Ç–æ–¥ `predict_7day_health_state` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å —Å –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏ (`ad_pred`, `pulse_pred`, `spo2_pred`).
    3.  –í `logs/app.log` –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ –æ —Ä–∞–±–æ—Ç–µ –º–æ–¥–µ–ª–∏.
*   **–í–∞–∂–Ω—ã–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ/–ò–º–ø–æ—Ä—Ç—ã**:
    *   `from sklearn.linear_model import Ridge` ‚Äî –¥–ª—è –æ–±—É—á–µ–Ω–∏—è.
    *   `import pandas as pd` ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏.
    *   `from core.db.local_db_meteo import get_user_health_log` ‚Äî –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   **–°–≤—è–∑—å**: `impact_forecast_script` ‚Üí `HealthPredictor` ‚Üí `local_db_meteo`.

---

### ‚úÖ **–®–ê–ì 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¶–µ–ø–æ—á–∫–∏ (–¢–µ–∫—É—â–∏–π –§–æ–∫—É—Å)**
*   **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏ –æ—Ç –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–¥–∞—á–∏ –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç–º—É–ª—è—Ü–∏—è –±–æ—Ç–∞.
*   **–ú–µ—Ç–æ–¥ –ö–æ–Ω—Ç—Ä–æ–ª—è**: –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ `tests/integration/test_full_chain.py`. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤: –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏, –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞, –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è.
*   **–ö—Ä–∏—Ç–µ—Ä–∏–π –ó–∞–≤–µ—Ä—à–µ–Ω–∏—è**:
    1.  –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫.
    2.  –í `logs/app.log` –µ—Å—Ç—å –ø–æ–ª–Ω–∞—è –∑–∞–ø–∏—Å—å –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ü–µ–ø–æ—á–∫–∏.
    3.  –í `logs/process.log` –µ—Å—Ç—å –∑–∞–ø–∏—Å—å –æ –∑–∞–¥–∞—á–µ –≤ –ë–î.
    4.  –í `data/` –ø–æ—è–≤–∏–ª—Å—è —Ñ–∞–π–ª –≥—Ä–∞—Ñ–∏–∫–∞.
    5.  –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤–∏–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ: "üéâ –¶–µ–ø–æ—á–∫–∞ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω–∞!".
*   **–í–∞–∂–Ω—ã–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ/–ò–º–ø–æ—Ä—Ç—ã**:
    *   `from core.process_manager import enqueue_script` ‚Äî –¥–ª—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–¥–∞—á–∏.
    *   `from core.event_bus import subscribe_async, clear_all_handlers` ‚Äî –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è.
    *   `from tests.integration.test_utils import wait_for_event` ‚Äî –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è.
    *   **–°–≤—è–∑—å**: `test_full_chain` ‚Üí `enqueue_script` ‚Üí `impact_forecast_script` ‚Üí `api_client` ‚Üí `cache_manager` ‚Üí `HealthPredictor` ‚Üí `event_bus` ‚Üí `test_full_chain`.

---

### ‚úÖ **–®–ê–ì 6: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –í–æ—Ä–∫–µ—Ä–æ–≤ (–°–ª–µ–¥—É—é—â–∏–π –≠—Ç–∞–ø)**
*   **–û–ø–∏—Å–∞–Ω–∏–µ**: –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –∏ –æ—á–∏—Å—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤.
*   **–ú–µ—Ç–æ–¥ –ö–æ–Ω—Ç—Ä–æ–ª—è**: –ó–∞–ø—É—Å–∫ `bot.py`. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤: `INFO: Health check passed`, `INFO: Cleanup worker started`.
*   **–ö—Ä–∏—Ç–µ—Ä–∏–π –ó–∞–≤–µ—Ä—à–µ–Ω–∏—è**:
    1.  –í–æ—Ä–∫–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞.
    2.  –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—á–∏—Å—Ç–∫–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è.
    3.  –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –∏–∑ `temp/` –∏ `data/` —É–¥–∞–ª—è—é—Ç—Å—è.
*   **–í–∞–∂–Ω—ã–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ/–ò–º–ø–æ—Ä—Ç—ã**:
    *   `import asyncio` ‚Äî –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤.
    *   `from core.db.central_db import check_db_connection` ‚Äî –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ë–î.
    *   `from core.utils.cache_manager import cleanup_expired_cache` ‚Äî –¥–ª—è –æ—á–∏—Å—Ç–∫–∏.
    *   **–°–≤—è–∑—å**: `bot.py` ‚Üí `workers/health_check_worker.py` ‚Üí `core/db/central_db.py`.

---

### ‚úÖ **–®–ê–ì 7: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram-–ë–æ—Ç–æ–º (–§–∏–Ω–∞–ª—å–Ω—ã–π –≠—Ç–∞–ø)**
*   **–û–ø–∏—Å–∞–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `bot.py` –∫–∞–∫ –æ–±–µ—Ä—Ç–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã —á–µ—Ä–µ–∑ `process_manager`.
*   **–ú–µ—Ç–æ–¥ –ö–æ–Ω—Ç—Ä–æ–ª—è**: –ó–∞–ø—É—Å–∫ `bot.py`. –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã `/forecast` –≤ Telegram. –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥—Ä–∞—Ñ–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
*   **–ö—Ä–∏—Ç–µ—Ä–∏–π –ó–∞–≤–µ—Ä—à–µ–Ω–∏—è**:
    1.  –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫.
    2.  –ü—Ä–∏ –∫–æ–º–∞–Ω–¥–µ `/forecast` –±–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç `impact_forecast_script` —á–µ—Ä–µ–∑ `process_manager`.
    3.  –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è `task_result` –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Ñ–∞–π–ª –≥—Ä–∞—Ñ–∏–∫–∞ –∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
*   **–í–∞–∂–Ω—ã–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ/–ò–º–ø–æ—Ä—Ç—ã**:
    *   `from telegram import Update` ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram.
    *   `from telegram.ext import Application, CommandHandler` ‚Äî –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥.
    *   `from core.process_manager import enqueue_script` ‚Äî –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤.
    *   `from core.event_bus import subscribe_async` ‚Äî –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
    *   **–°–≤—è–∑—å**: `Telegram Bot` ‚Üí `bot.py` ‚Üí `process_manager` ‚Üí `impact_forecast_script` ‚Üí `event_bus` ‚Üí `bot.py` ‚Üí `Telegram Bot`.

---

## üß© **–í–∞–∂–Ω—ã–µ –°–≤—è–∑–∏ –∏ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–û–±–æ–±—â–µ–Ω–∏–µ)**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ö–ª—é—á–µ–≤—ã–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ | –í–∞–∂–Ω—ã–µ –ò–º–ø–æ—Ä—Ç—ã | –°–≤—è–∑–∏ |
| :--- | :--- | :--- | :--- |
| **Process Manager** | `task_id`, `script_path`, `args`, `retries_left`, `env` | `asyncio`, `subprocess`, `emit_event`, `log_task_start/finish` | –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã, –ø–∞—Ä—Å–∏—Ç stdout, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è. |
| **Impact Forecast Script** | `user_id`, `lat`, `lon`, `days`, `graph_path`, `summary` | `script_logger`, `api_client`, `cache_manager`, `HealthPredictor` | –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, —Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫, –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç. |
| **API Client** | `lat`, `lon`, `forecast_data`, `response` | `requests`, `json` | –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å Open-Meteo. |
| **Cache Manager** | `data`, `filename`, `file_path` | `pathlib.Path`, `matplotlib.pyplot` | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∞–Ω–Ω—ã–µ –≤ `data/`. |
| **Health Predictor** | `meteo_df`, `user_profile`, `prediction`, `risks` | `pandas`, `sklearn`, `numpy` | –î–µ–ª–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è. |
| **Event Bus** | `event_type`, `event_data`, `handler` | `asyncio`, `typing.Callable` | –ü–µ—Ä–µ–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏. |
| **Bot (–≠–º—É–ª—è—Ü–∏—è)** | `received_events`, `task_id` | `subscribe_async`, `enqueue_script` | –≠–º—É–ª–∏—Ä—É–µ—Ç –±–æ—Ç–∞, –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è. |

---

## üöÄ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –î–≤–∏–∂–µ–Ω–∏—é –î–∞–ª—å—à–µ**

1.  **–°–µ–π—á–∞—Å**: –°—Ñ–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ **–®–∞–≥–µ 5**. –ó–∞–ø—É—Å—Ç–∏ `test_full_chain.py` –∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∏ –ª–æ–≥–∏ –≤ `logs/app.log` –∏ `logs/errors.log`. –≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç, –≥–¥–µ –∏–º–µ–Ω–Ω–æ –æ–±—Ä—ã–≤–∞–µ—Ç—Å—è —Ü–µ–ø–æ—á–∫–∞.
2.  **–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∏–º–ø–æ—Ä—Ç–µ**: –£–±–µ–¥–∏—Å—å, —á—Ç–æ `PYTHONPATH` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `process_manager.py`.
3.  **–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤ –≤—ã–≤–æ–¥–µ**: –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `impact_forecast_script.py` –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤—ã–≤–æ–¥–∏—Ç —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `KEY:VALUE`.
4.  **–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞**: –ü–µ—Ä–µ—Ö–æ–¥–∏ –∫ **–®–∞–≥—É 6** ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–æ—Ä–∫–µ—Ä–æ–≤. –û–Ω–∏ –æ–±–µ—Å–ø–µ—á–∞—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.

