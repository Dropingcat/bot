**–û—Ç–ª–∏—á–Ω–æ**, –ê—Ä—Ö—ã—Å! –ù–∏–∂–µ ‚Äî **–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π `data_processor.py`**, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π **—Ä–∞–∑–Ω—ã–µ –≤–∏–¥—ã –¥–∞–Ω–Ω—ã—Ö** (1D, 2D, 3D), –∏ **`docs/data_processor_usage.md`** —Å **–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π**, **–ø—Ä–∏–º–µ—Ä–∞–º–∏** –∏ **–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ –≤—ã–±–æ—Ä—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**.

---

## üîß `core/utils/data_processor.py` (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π)

## üìÑ `docs/data_processor_usage.md`

```markdown
# Data Processor ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–±–∑–æ—Ä

`data_processor.py` ‚Äî **—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç** –¥–ª—è **–æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏**:

- ‚úÖ **1D**: –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –¥–∞–≤–ª–µ–Ω–∏–µ, –≤–ª–∞–∂–Ω–æ—Å—Ç—å)
- ‚úÖ **2D**: —Å–µ—Ç–∫–∏ (–¥–∞–≤–ª–µ–Ω–∏–µ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–∞ –∫–∞—Ä—Ç–µ)
- ‚úÖ **3D+**: —Ç–µ–Ω–∑–æ—Ä—ã (—Ñ–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –º–æ–¥–µ–ª–∏)
- ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ —à—É–º–∞
- ‚úÖ **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**: min-max, z-score
- ‚úÖ **–ê–≥—Ä–µ–≥–∞—Ü–∏—è**: —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

---

## –ò–º–ø–æ—Ä—Ç

```python
from core.utils.data_processor import (
    interpolate_timeseries,
    interpolate_2d_grid,
    interpolate_2d_to_points,
    interpolate_tensor,
    moving_average_filter,
    median_filter,
    normalize_min_max,
    normalize_z_score,
    aggregate_by_time,
    process_weather_timeseries,
    process_2d_weather_map
)
```

---

## 1. 1D: –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã

### `interpolate_timeseries(timestamps, values, target_timestamps, method='linear')`

–ò–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ—Ç **–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä—è–¥** (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –¥–∞–≤–ª–µ–Ω–∏–µ –∏ —Ç.–¥.).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `timestamps`: `["2025-01-01 00:00:00", "01:00:00", ...]`
- `values`: `[1.0, 2.0, 3.0, ...]`
- `target_timestamps`: `["00:30:00", "01:30:00", ...]`
- `method`: `"linear"`, `"cubic"`, `"quadratic"`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `list[float]`

**–ü—Ä–∏–º–µ—Ä:**
```python
timestamps = ["2025-01-01 00:00:00", "02:00:00"]
temps = [1.0, 3.0]
target_times = ["2025-01-01 01:00:00"]
result = interpolate_timeseries(timestamps, temps, target_times)
# [2.0]
```

---

### `resample_timeseries(timestamps, values, new_freq='1h')`

–†–µ—Å—ç–º–ø–ª–∏—Ä—É–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä—è–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å 2-—á–∞—Å–æ–≤–æ–≥–æ –Ω–∞ 1-—á–∞—Å–æ–≤–æ–π).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `timestamps`: `list[str]`
- `values`: `list[float]`
- `new_freq`: `"1h"`, `"30min"`, `"1d"`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `(–Ω–æ–≤—ã–µ_–≤—Ä–µ–º–µ–Ω–∞, –Ω–æ–≤—ã–µ_–∑–Ω–∞—á–µ–Ω–∏—è)`

---

## 2. 2D: –°–µ—Ç–∫–∏

### `interpolate_2d_grid(x_orig, y_orig, z_values, x_target, y_target, method='linear')`

–ò–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ—Ç **2D —Å–µ—Ç–∫—É** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `x_orig`: `[55.0, 55.1, 55.2]` ‚Äî –∏—Å—Ö–æ–¥–Ω—ã–µ X (—à–∏—Ä–æ—Ç—ã)
- `y_orig`: `[37.0, 37.1, 37.2]` ‚Äî –∏—Å—Ö–æ–¥–Ω—ã–µ Y (–¥–æ–ª–≥–æ—Ç—ã)
- `z_values`: `[[1010, 1011], [1012, 1013]]` ‚Äî –º–∞—Ç—Ä–∏—Ü–∞ –∑–Ω–∞—á–µ–Ω–∏–π
- `x_target`: `[55.05, 55.15]` ‚Äî —Ü–µ–ª–µ–≤—ã–µ X
- `y_target`: `[37.05, 37.15]` ‚Äî —Ü–µ–ª–µ–≤—ã–µ Y
- `method`: `"linear"`, `"cubic"`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `list[list[float]]` ‚Äî –Ω–æ–≤–∞—è –º–∞—Ç—Ä–∏—Ü–∞

**–ü—Ä–∏–º–µ—Ä:**
```python
pressure_map = interpolate_2d_grid(
    x_orig=[55.0, 56.0],
    y_orig=[37.0, 38.0],
    z_values=[[1010, 1012], [1011, 1013]],
    x_target=[55.5],
    y_target=[37.5]
)
# [[1011.5]]
```

---

### `interpolate_2d_to_points(x_orig, y_orig, z_values, target_points, method='linear')`

–ò–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ—Ç **–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–æ—á–∫–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–∞–≤–ª–µ–Ω–∏–µ –≤ 5 —Ç–æ—á–∫–∞—Ö).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `target_points`: `[(55.5, 37.5), (56.0, 38.0)]`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `list[float]`

---

## 3. 3D+: –¢–µ–Ω–∑–æ—Ä—ã

### `interpolate_tensor(tensor, target_shape, method='linear')`

–ò–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ—Ç **–º–Ω–æ–≥–æ–º–µ—Ä–Ω—ã–π —Ç–µ–Ω–∑–æ—Ä** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `tensor`: `np.ndarray`
- `target_shape`: `(100, 100, 5)` ‚Äî –Ω–æ–≤–∞—è —Ñ–æ—Ä–º–∞
- `method`: `"linear"`, `"cubic"`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `np.ndarray`

---

## –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è

### `moving_average_filter(values, window_size=3)`

–°–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ.

**–ü—Ä–∏–º–µ—Ä:**
```python
smoothed = moving_average_filter([1, 2, 6, 8, 1], window_size=3)
```

### `median_filter(values, window_size=3)`

–ú–µ–¥–∏–∞–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä (—É–¥–∞–ª—è–µ—Ç –≤—ã–±—Ä–æ—Å—ã).

---

## –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

### `normalize_min_max(values, min_val=0.0, max_val=1.0)`

–ü—Ä–∏–≤–æ–¥–∏—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∫ –¥–∏–∞–ø–∞–∑–æ–Ω—É `[min_val, max_val]`.

### `normalize_z_score(values)`

Z-–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è: —Å—Ä–µ–¥–Ω–µ–µ = 0, std = 1.

---

## –ê–≥—Ä–µ–≥–∞—Ü–∏—è

### `aggregate_by_time(df, freq='1h', agg_func='mean')`

–ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç DataFrame –ø–æ –≤—Ä–µ–º–µ–Ω–∏.

**–ü—Ä–∏–º–µ—Ä:**
```python
df = pd.DataFrame({'temp': [1, 2, 3, 4]}, index=pd.date_range('00:00', periods=4, freq='30min'))
hourly = aggregate_by_time(df, freq='1h', agg_func='mean')
```

---

## –£–¥–æ–±–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### `process_weather_timeseries(...)`

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä—è–¥ –ø–æ–≥–æ–¥—ã (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –¥–∞–≤–ª–µ–Ω–∏–µ) ‚Äî –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è + —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è.

### `process_2d_weather_map(...)`

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 2D-—Å–µ—Ç–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ).

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í `scripts/weather/weather_graph_script.py`:

```python
from core.utils.data_processor import interpolate_timeseries

timestamps = ["00:00", "02:00"]
temps = [1.0, 3.0]
interpolated = interpolate_timeseries(timestamps, temps, ["01:00"])
```

### –í `scripts/meteo/front_forecast_script.py`:

```python
from core.utils.data_processor import interpolate_2d_grid

# –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –¥–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ
pressure_map = interpolate_2d_grid(lats, lons, pressure_grid, new_lats, new_lons)
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç **—Ä–∞–∑–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç **NaN –∑–Ω–∞—á–µ–Ω–∏—è**
- ‚úÖ –ù–µ –ø–∞–¥–∞—é—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `[]` –∏–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –õ–æ–≥–∏—Ä—É—é—Ç –≤—Å—ë —á–µ—Ä–µ–∑ `logging`

---
```

---

## ‚úÖ –¢–µ–ø–µ—Ä—å:

- ‚úÖ `data_processor` ‚Äî **—É–Ω–∏–≤–µ—Ä—Å–∞–ª–µ–Ω** –¥–ª—è 1D, 2D, 3D
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Äî —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è** —Å `api_client`, `cache_manager`, `scripts/`

---

–•–æ—á–µ—à—å, —è **–Ω–∞–ø–∏—à—É —Ç–µ—Å—Ç—ã** –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏–ª–∏ **–ø–µ—Ä–µ–π–¥—ë–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É**?