–ö–æ–Ω–µ—á–Ω–æ. –ù–∏–∂–µ ‚Äî **–≥–ª–æ–±–∞–ª—å–Ω—ã–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown**, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞:

- ‚úÖ **–±–ª–æ—á–Ω—É—é –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** (–∫–∞–∂–¥—ã–π —Å–∫—Ä–∏–ø—Ç ‚Äî –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π, —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –±–ª–æ–∫),  
- ‚úÖ **–µ–¥–∏–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–∞–Ω–Ω—ã—Ö** (–≤—Ö–æ–¥/–≤—ã—Ö–æ–¥ –ø–æ —Å—Ç—Ä–æ–≥–∏–º —Å—Ö–µ–º–∞–º),  
- ‚úÖ **—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏** (—á–µ—Ä–µ–∑ `ProcessManager`, –∞ –Ω–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ),  
- ‚úÖ **–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö**,  
- ‚úÖ **—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å `python-telegram-bot`**.

–§–∞–π–ª –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ `docs/architecture.md` –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã.

---

# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Telegram-–±–æ—Ç–∞: –±–ª–æ—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–∞–Ω–Ω—ã—Ö

> –í–µ—Ä—Å–∏—è: 1.0  
> –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 27 –¥–µ–∫–∞–±—Ä—è 2025 –≥.  
> –¶–µ–ª—å: –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–≥–æ, —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–≥–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.

---

## üî∑ 1. –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1.1. –ë–ª–æ—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥
- –ö–∞–∂–¥—ã–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Å–∫—Ä–∏–ø—Ç (`*.py`) ‚Äî **—Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –±–ª–æ–∫** —Å —á—ë—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º:
  - **–≤—Ö–æ–¥–æ–º** (`InputSchema`),
  - **–≤—ã—Ö–æ–¥–æ–º** (`OutputSchema`),
  - **–ø–æ–±–æ—á–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏** (–∑–∞–ø–∏—Å—å –≤ –ë–î, –≤—ã–∑–æ–≤ API ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ dependency injection).
- –ë–ª–æ–∫–∏ **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (–∫—Ä–æ–º–µ `process_manager` –∫–∞–∫ dependency container).

### 1.2. –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è **–ø–æ –∑–Ω–∞—á–µ–Ω–∏—é** (–Ω–µ –ø–æ —Å—Å—ã–ª–∫–µ).
- –í—Å–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ‚Äî **–≤–∞–ª–∏–¥–∏—Ä—É–µ–º—ã–µ Pydantic-–º–æ–¥–µ–ª–∏** –∏–ª–∏ **–ø—Ä–∏–º–∏—Ç–∏–≤—ã**.
- –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î/API –∏–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ **–∏–Ω—ä–µ–∫—Ü–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**.

### 1.3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ –≥—Ä–∞–Ω–∏—Ü–∞–º
- **–°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è** ‚Äî –Ω–∞ –≤—Ö–æ–¥–µ (–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö Telegram).
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** ‚Äî –Ω–∞ –≤—ã—Ö–æ–¥–µ –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º (API, –ë–î).
- **–≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –Ω–∞ –≤—ã—Ö–æ–¥–µ (–ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ Telegram).

---

## üî∑ 2. –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä: `process_manager.py`

### –†–æ–ª—å
–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞. **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏** –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```python
class ProcessManager:
    config: BotConfig
    central_db: CentralDB
    weather_db: WeatherCacheDB
    weather_client: WeatherAPIClient
    geocoder: GeocodingClient
    location_resolver: LocationResolver
    cache_manager: CacheManager
    # + –º–µ—Ç–æ–¥—ã initialize()/shutdown()
```

### –ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –î–æ—Å—Ç—É–ø–µ–Ω **–≥–ª–æ–±–∞–ª—å–Ω–æ**, –Ω–æ **—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è** –ø–æ—Å–ª–µ `initialize()`.
- **–ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏** ‚Äî —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
- –í —Ç–µ—Å—Ç–∞—Ö –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ mock —á–µ—Ä–µ–∑ monkeypatch.

---

## üî∑ 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏ `scripts/`

–ö–∞–∂–¥—ã–π –ø–æ–¥–º–æ–¥—É–ª—å (`weather/`, `agro/`, `meteo/`) —Å–ª–µ–¥—É–µ—Ç –µ–¥–∏–Ω–æ–º—É —à–∞–±–ª–æ–Ω—É:

```
scripts/
‚îî‚îÄ‚îÄ <module>/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ <module>_handler.py        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ Telegram
    ‚îú‚îÄ‚îÄ _services/                 # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–±–ª–æ–∫–∏)
    ‚îÇ   ‚îú‚îÄ‚îÄ input_validator.py     # –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–∞
    ‚îÇ   ‚îú‚îÄ‚îÄ data_fetcher.py        # –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    ‚îÇ   ‚îú‚îÄ‚îÄ data_processor.py      # –û–±—Ä–∞–±–æ—Ç–∫–∞
    ‚îÇ   ‚îî‚îÄ‚îÄ output_formatter.py    # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    ‚îî‚îÄ‚îÄ _io/
        ‚îî‚îÄ‚îÄ templates/             # –®–∞–±–ª–æ–Ω—ã –≤—ã–≤–æ–¥–∞ (Jinja2, autoescape=True)
```

---

## üî∑ 4. –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–∞–Ω–Ω—ã—Ö: –µ–¥–∏–Ω—ã–µ —Å—Ö–µ–º—ã

### 4.1. –û–±—â–∏–µ —Å—Ö–µ–º—ã (–≤ `core/models/`)

```python
# core/models/location.py
class CanonicalLocation(BaseModel):
    id: str                    # geo:55.7558:37.6176
    lat: float = Field(ge=-90, le=90)
    lon: float = Field(ge=-180, le=180)
    display_name: str
    timezone: str

# core/models/weather.py
class WeatherRequest(BaseModel):
    user_id: int
    location: CanonicalLocation

class WeatherResponse(BaseModel):
    temp: float = Field(ge=-80, le=60)
    description: str
    timestamp: datetime
    source: str                # "openweather", "yr", etc.
```

> ‚úÖ –í—Å–µ –±–ª–æ–∫–∏ **–ø—Ä–∏–Ω–∏–º–∞—é—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ç–æ–ª—å–∫–æ —Ç–∞–∫–∏–µ –º–æ–¥–µ–ª–∏**.

---

## üî∑ 5. –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è `weather/`

### 5.1. –û–±—Ä–∞–±–æ—Ç—á–∏–∫: `weather_handler.py`
- **–í—Ö–æ–¥**: `Update` (–æ—Ç Telegram) ‚Üí –∏–∑–≤–ª–µ–∫–∞–µ—Ç `user_id`.
- **–í—ã—Ö–æ–¥**: `str` (HTML-—Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è Telegram).
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:  
  `process_manager.central_db`,  
  `process_manager.weather_db`,  
  `process_manager.weather_presenter`.

- **–ö–æ–Ω—Ç—Ä–∞–∫—Ç**:  
  ```python
  async def handle_weather(update: Update) -> None:
      # 1. –ü–æ–ª—É—á–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é ‚Üí WeatherRequest
      # 2. –í—ã–∑–≤–∞—Ç—å weather_fetcher.execute(WeatherRequest)
      # 3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  ```

### 5.2. –ë–ª–æ–∫: `_services/weather_fetcher.py`
- **–í—Ö–æ–¥**: `WeatherRequest`
- **–í—ã—Ö–æ–¥**: `WeatherResponse`
- **–õ–æ–≥–∏–∫–∞**:
  - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞ (`weather_db.has_fresh_data`),
  - fallback –Ω–∞ API (`weather_client.fetch_current`),
  - –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ (`validator.validate_weather_response`),
  - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à.

- **–ò—Å–∫–ª—é—á–µ–Ω–∏—è**:  
  –í—Å–µ –æ—à–∏–±–∫–∏ ‚Üí –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ `WeatherFetchError`.

### 5.3. –ë–ª–æ–∫: `_services/output_formatter.py` ‚Üí `WeatherPresenter`
- **–í—Ö–æ–¥**: `WeatherResponse`, `display_name: str`
- **–í—ã—Ö–æ–¥**: `str` (HTML)
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:  
  –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Jinja2 —Å `autoescape=True`.

---

## üî∑ 6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏—è–º–∏: FSM-–±–ª–æ–∫

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫: `location_fsm.py`
- **–°–æ—Å—Ç–æ—è–Ω–∏—è**: `LOCATION_INPUT`
- **–¢—Ä–∏–≥–≥–µ—Ä—ã**:
  - `filters.LOCATION` ‚Üí `handle_location_geo`
  - `filters.TEXT` ‚Üí `handle_location_text`

### –ë–ª–æ–∫: `_services/location_resolver.py`
- **–í—Ö–æ–¥**: `str` (–Ω–∞–∑–≤–∞–Ω–∏–µ) –∏–ª–∏ `(lat, lon)`
- **–í—ã—Ö–æ–¥**: `CanonicalLocation`
- **–≠—Ç–∞–ø—ã**:
  1. –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è (`sanitize_user_input`),
  2. –ì–µ–æ–∫–æ–¥–∏–Ω–≥ (`geocoder.geocode`),
  3. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (`round(lat, 4)`),
  4. Reverse-–≥–µ–æ–∫–æ–¥–∏–Ω–≥ (–¥–ª—è `display_name`).

---

## üî∑ 7. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∏—Ö –∑–∞–º–µ–Ω–∞

| –ß—Ç–æ –±—ã–ª–æ (–∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω) | –ß—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–ø–∞—Ç—Ç–µ—Ä–Ω) |
|------------------------|----------------------------|
| `global DB_CONNECTION` | `process_manager.central_db` |
| `API_KEY = os.getenv(...)` –≤ –∫–∞–∂–¥–æ–º —Ñ–∞–π–ª–µ | `process_manager.config.weather_api_key` |
| –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ `requests.get(...)` | `process_manager.weather_client.fetch_current(...)` |
| HTML-–∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è | `process_manager.weather_presenter.format(...)` |

> ‚úÖ **–ù–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è**, –∫—Ä–æ–º–µ immutable `ProcessManager`.

---

## üî∑ 8. –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö: –ø—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–≥–æ–¥—ã

```mermaid
sequenceDiagram
    participant User
    participant Bot as bot.py
    participant Handler as weather_handler.py
    participant Fetcher as weather_fetcher.py
    participant DB as local_db_weather.py
    participant API as WeatherAPIClient

    User->>Bot: /weather
    Bot->>Handler: handle_weather(update)
    Handler->>DB: get_default_location(user_id)
    DB-->>Handler: CanonicalLocation
    Handler->>Fetcher: execute(WeatherRequest)
    Fetcher->>DB: has_fresh_data(lat, lon)?
    alt –ï—Å—Ç—å –∫—ç—à
        DB-->>Fetcher: WeatherResponse
    else –ù–µ—Ç –∫—ç—à–∞
        Fetcher->>API: fetch_current(lat, lon)
        API-->>Fetcher: raw JSON
        Fetcher->>DB: save_weather(lat, lon, raw)
        DB-->>Fetcher: –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    end
    Fetcher-->>Handler: WeatherResponse
    Handler->>Presenter: format(response, name)
    Presenter-->>Handler: HTML string
    Handler->>User: sendMessage(HTML)
```

---

## üî∑ 9. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –Ω–æ–≤—ã–º –±–ª–æ–∫–∞–º

–õ—é–±–æ–π –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –≤ `scripts/<module>/` **–æ–±—è–∑–∞–Ω**:

1. –û–ø—Ä–µ–¥–µ–ª—è—Ç—å `InputSchema` –∏ `OutputSchema` (Pydantic).
2. –ü—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `process_manager`.
3. –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ.
4. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ `core/utils/error_handler.py`.
5. –ò–º–µ—Ç—å unit-—Ç–µ—Å—Ç –≤ `tests/unit/scripts/<module>/`.

---

## üî∑ 10. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

```mermaid
graph TD
    A[bot.py] --> B[process_manager]
    B --> C[core/db/]
    B --> D[core/utils/]
    B --> E[scripts/weather/]
    B --> F[scripts/agro/]
    B --> G[scripts/meteo/]
    E --> D
    E --> C
    F --> D
    G --> D
```

> –ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –í—Å–µ —Å–≤—è–∑–∏ ‚Äî —á–µ—Ä–µ–∑ `process_manager`.

---

## üî∑ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å**: –∫–∞–∂–¥—ã–π –±–ª–æ–∫ ‚Äî —á—ë—Ä–Ω—ã–π —è—â–∏–∫ —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º –≤—Ö–æ–¥–æ–º/–≤—ã—Ö–æ–¥–æ–º,
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è, —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö –≥—Ä–∞–Ω–∏—Ü–∞—Ö,
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å = –∫–æ–ø–∏—è —à–∞–±–ª–æ–Ω–∞ + –Ω–æ–≤—ã–µ —Å—Ö–µ–º—ã,
- **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–Ω—ä–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è, –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

–î–æ–∫—É–º–µ–Ω—Ç —Å–ª—É–∂–∏—Ç **–µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–æ–π –∏—Å—Ç–∏–Ω—ã** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ CI/CD-—Å–∏—Å—Ç–µ–º—ã.

--- 

–§–∞–π–ª –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ `docs/architecture.md` –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —á–µ—Ä–µ–∑ pull request checklist.

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —è –º–æ–≥—É:
- —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è `agro/` –∏ `meteo/`,
- –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω `InputSchema`/`OutputSchema` –¥–ª—è –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π,
- –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —á–µ—Ä–µ–∑ `pytest` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—Ä–µ—Ç –Ω–∞ `import requests` –≤–Ω–µ `api_client.py`).

–ì–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏.